'use strict';layui.define(["default","testcode"],function(w){var b=layui.$,d=layui.layer,u=layui.util,p=layui.form,x=layui.laytpl,y=layui.dropdown,z=layui.code,c=layui.default,a=layui.testcode,g=a.TABLENAME,m={dark:[c.Paths.CSS+"google-dark.min.css","layui-code-hljs-dark"],light:[c.Paths.CSS+"google-light.min.css","layui-code-hljs-light"]};layui.link(""+m[a.ThemeMode][0],""+m[a.ThemeMode][1]);var v=b("#test-code-edit-tpl").html(),q=b('\x3ciframe id\x3d"Popup-View-iframe" class\x3d"Popup-View-iframe"\x3e\x3c/iframe\x3e').attr({frameborder:0,allowtransparency:!0}),r,n,t=c.Debounce(function(){n="";b(".Popup-Code .Popup-Code-Edit .layui-code-wrap .layui-code-line").each(function(a,c){b(c).children(".layui-code-line-content").each(function(a,k){n+=""==n?"":"\r\n";n+=b(k).text()})});a.CacheCode&&(a.Code=n,layui.data(g,{key:"Code",value:a.Code}));q.attr("srcdoc",n+"\n    \x3cstyle\x3e\n      ::-webkit-scrollbar {width: 6px;height: 6px;}\n      ::-webkit-scrollbar,::-webkit-scrollbar-corner {background: transparent;}\n      ::-webkit-scrollbar-thumb {background: rgba(0,0,0,.1);border-radius: 6px;}\n    \x3c/style\x3e\n  ")},300),h=c.Debounce(function(){a.CacheLayout&&(a.Layout.Code.IsMax||a.Layout.Code.IsMin||(a.Layout.Code.Width=b(".Popup-Code").width(),a.Layout.Code.Height=b(".Popup-Code").height(),a.Layout.Code.Top=b(".Popup-Code").offset().top,a.Layout.Code.Left=b(".Popup-Code").offset().left),a.Layout.View.IsMax||a.Layout.View.IsMin||(a.Layout.View.Width=b(".Popup-View").width(),a.Layout.View.Height=b(".Popup-View").height(),a.Layout.View.Top=b(".Popup-View").offset().top,a.Layout.View.Left=b(".Popup-View").offset().left),layui.data(g,{key:"Layout",value:a.Layout}))},300);b(window).on("resize",function(){h()});(function(){d.open({type:1,id:"Popup-Header",skin:"Popup-Header",title:!1,shade:0,zIndex:1,closeBtn:0,shadeClose:!1,offset:"t",anim:"slideDown",area:["100%","55px"],content:'\x3cdiv class\x3d"Popup-Loading"\x3e\x3ci class\x3d"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"\x3e\x3c/i\x3e\x3c/div\x3e',move:!1,resize:!1,success:function(A,l,f){var k=A.find("#"+f.config.id);x(b("#test-code-header-tpl").html()).render(a,function(f){k.html(f);k.find(".CodeTips").hover(function(){var a=b(this),f=b(this).data("tips"),f=d.tips(f,this,{zIndex:d.zIndex,time:-1,tips:4,fixed:!0});a.data("index",f)},function(){d.close(b(this).data("index"))});k.find(".TabSize").addClass("layui-hide");p.render(null,"test-code-header-right-form");p.on("checkbox(test-code-header-autorun-checkbox)",function(e){e=e.elem.checked;layui.data(g,{key:"AutoRun",value:e});a.AutoRun=e;c.ok("\u5df2"+(e?"\u5f00\u542f":"\u5173\u95ed")+"\u81ea\u52a8\u8fd0\u884c",{ico:-1,zIndex:d.zIndex});e?k.find(".RunCode").addClass("layui-hide"):k.find(".RunCode").removeClass("layui-hide")});p.on("checkbox(test-code-header-cachecode-checkbox)",function(e){e=e.elem.checked;layui.data(g,{key:"CacheCode",value:e});a.CacheCode=e;e||(a.Code=null,layui.data(g,{key:"Code",value:a.Code}));e&&t();c.ok("\u5df2"+(e?"\u5f00\u542f":"\u5173\u95ed")+"\u8bb0\u5fc6\u4ee3\u7801",{ico:-1,zIndex:d.zIndex})});p.on("checkbox(test-code-header-cachelayout-checkbox)",function(e){e=e.elem.checked;layui.data(g,{key:"CacheLayout",value:e});a.CacheLayout=e;e||(a.Layout={Code:{Width:"49.5%",Height:c.Screen.Height-62,Offset:"lb",Top:62,Left:0,IsMax:!1,IsMin:!1},View:{Width:"49.5%",Height:c.Screen.Height-62,Offset:"rb",Top:62,Left:"50.5%",IsMax:!1,IsMin:!1}},layui.data(g,{key:"Layout",value:a.Layout}));e&&h();c.ok("\u5df2"+(e?"\u5f00\u542f":"\u5173\u95ed")+"\u8bb0\u5fc6\u5e03\u5c40",{ico:-1,zIndex:d.zIndex})});p.on("switch(test-code-header-theme-switch)",function(e){e=e.elem.checked;if(!r)return p.val(PopupHeaderForm,{ThemeMode:e?!1:!0}),c.no("\u7f16\u8f91\u5668\u5c1a\u672a\u51c6\u5907\u5c31\u7eea",{zIndex:d.zIndex}),!1;a.ThemeMode=e?"dark":"light";c.ToggleThemeMode(a.ThemeMode);"dark"==a.ThemeMode?b("#layuicss-"+m.light[1])[0]&&b("#layuicss-"+m.light[1]).remove():b("#layuicss-"+m.dark[1])[0]&&b("#layuicss-"+m.dark[1]).remove();layui.link(""+m[a.ThemeMode][0],""+m[a.ThemeMode][1]);r.reload({theme:a.ThemeMode});layui.data(g,{key:"ThemeMode",value:a.ThemeMode});c.ok(e?"\u5df2\u5f00\u542f\u6df1\u8272\u6a21\u5f0f":"\u5df2\u5f00\u542f\u6d45\u8272\u6a21\u5f0f",{ico:-1,zIndex:d.zIndex})});y.render({elem:".Version",shade:0,trigger:"hover",className:"Dropdown-Version",data:[{version:"Vs",title:"Vs \u7f16\u8f91\u5668"},{version:"Layui",title:"Layui \u7f16\u8f91\u5668"}],ready:function(a,f){f.find(".layui-icon").addClass("Down-More")},click:function(e){e=e.version;if(a.Version==e)return c.no("\u5f53\u524d\u5df2\u662f "+e+" \u7f16\u8f91\u5668",{zIndex:d.zIndex}),!1;layui.data(g,{key:"Version",value:e});a.Version=e;this.elem.find("span").text("\u5f53\u524d\u7248\u672c\uff1a"+e);c.ok("\u5207\u6362\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u9762\u9875...",{zIndex:d.zIndex},function(){location.reload()})},close:function(a){a.find(".layui-icon").removeClass("Down-More")}});b(".ResetCode").on("click",c.Debounce(function(){r.reloadCode({code:u.unescape(v)})},300));b(".RunCode").on("click",function(){t()});b(".DelCache").on("click",function(){d.confirm("\u786e\u5b9a\u6e05\u9664\u6d4f\u89c8\u5668\u5168\u90e8\u7f13\u5b58\u8bb0\u5fc6\u5417\uff1f",{title:"\u7279\u522b\u63d0\u9192",icon:0,zIndex:d.zIndex},function(){layui.data(g,null);c.ok("\u6e05\u9664\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u9762\u9875...",{zIndex:d.zIndex},function(){location.reload()})})})})},beforeEnd:function(){c.no("\u7f16\u8f91\u5668\u7981\u6b62\u5173\u95ed",{zIndex:d.zIndex});return!1}})})();(function(){var g=b('\x3cstyle id\x3d"Popup-Code-Style"\x3e'),l="";d.open({type:1,id:"Popup-Code",skin:"Popup-Code",title:"HTML",shade:0,zIndex:2,closeBtn:0,maxmin:!0,shadeClose:!1,anim:"slideRight",offset:a.CacheLayout?[a.Layout.Code.Top+"px",a.Layout.Code.Left+"px"]:a.Layout.Code.Offset,area:a.CacheLayout?[a.Layout.Code.Width+"px",a.Layout.Code.Height+"px"]:[""+a.Layout.Code.Width,a.Layout.Code.Height+"px"],content:'\x3cpre class\x3d"layui-code Popup-Code-Edit" contenteditable\x3d"true"\x3e\x3c/pre\x3e',success:function(f,k,B){d.setTop(f);a.Layout.Code.IsMax?(d.full(k),B.config.move=!1):a.Layout.Code.IsMin&&d.min(k);l=".Popup-Code .layui-layer-resize::after {width: "+f.width()+"px;}";g.html(l);b("head").append(g);b.getScript(c.Paths.JS+"highlight.min.js",function(){r=z({elem:".Popup-Code-Edit",code:a.CacheCode?a.Code:u.unescape(v),lang:"html",theme:"dark"==a.ThemeMode?"dark":"light",copy:!0,header:!1,wordWrap:!0,preview:!1,layout:["code"],highlighter:"hljs",codeRender:function(f,b){a.AutoRun&&t();return hljs.highlight(f,{language:b.lang}).value},onCopy:function(a,f){f?c.ok("\u4ee3\u7801\u590d\u5236\u6210\u529f",{zIndex:d.zIndex}):c.no("\u4ee3\u7801\u590d\u5236\u5931\u8d25",{zIndex:d.zIndex});return!1},done:function(f){n=a.CacheCode?a.Code:u.unescape(v);q.attr("srcdoc",n+"\n    \x3cstyle\x3e\n      ::-webkit-scrollbar {width: 6px;height: 6px;}\n      ::-webkit-scrollbar,::-webkit-scrollbar-corner {background: transparent;}\n      ::-webkit-scrollbar-thumb {background: rgba(0,0,0,.1);border-radius: 6px;}\n    \x3c/style\x3e\n  ");b("#Popup-View").html(q);b(".Popup-Code-Edit").on("input",function(){a.AutoRun&&t()});q.on("load",function(){b("#Popup-Header").find(".ResetCode").hasClass("layui-hide")&&b("#Popup-Header").find(".ResetCode").removeClass("layui-hide")})}})})},full:function(f,b,c){c.config.move=!1;a.Layout.Code.IsMax=!0;a.Layout.Code.IsMin=!1;h()},min:function(f,b,c){c.config.move=!0;a.Layout.Code.IsMax=!1;a.Layout.Code.IsMin=!0;h()},restore:function(f,b,c){c.config.move=!0;a.Layout.Code.IsMax=!1;a.Layout.Code.IsMin=!1;h()},resizing:function(a){var b=a.offset();a.width()+b.left>c.Screen.Width&&a.width(c.Screen.Width-b.left);a.height()+b.top>c.Screen.Height&&a.height(c.Screen.Height-b.top);l=".Popup-Code .layui-layer-resize::after {width: "+a.width()+"px;}";g.html(l);h()},moveEnd:function(a){var c=a.offset(),f=b(".Popup-Header").height()+5;c.top<f&&a.css("top",f+"px");h()},beforeEnd:function(){c.no("\u7f16\u8f91\u5668\u7981\u6b62\u5173\u95ed",{zIndex:d.zIndex});return!1}})})();(function(){var g=b('\x3cstyle id\x3d"Popup-View-Style"\x3e'),l="";d.open({type:1,id:"Popup-View",skin:"Popup-View",title:"Preview",shade:0,zIndex:3,closeBtn:0,maxmin:!0,shadeClose:!1,anim:"slideLeft",offset:a.CacheLayout?[a.Layout.View.Top+"px",a.Layout.View.Left+"px"]:a.Layout.View.Offset,area:a.CacheLayout?[a.Layout.View.Width+"px",a.Layout.View.Height+"px"]:[""+a.Layout.View.Width,a.Layout.View.Height+"px"],content:'\x3cdiv class\x3d"Popup-Loading"\x3e\x3ci class\x3d"layui-icon layui-icon-loading layui-anim layui-anim-rotate layui-anim-loop"\x3e\x3c/i\x3e\x3c/div\x3e',success:function(c,k,h){d.setTop(c);a.Layout.View.IsMax?(d.full(k),h.config.move=!1):a.Layout.View.IsMin&&d.min(k);l=".Popup-View .layui-layer-resize::after {width: "+c.width()+"px;}";g.html(l);b("head").append(g)},full:function(b,c,d){d.config.move=!1;a.Layout.View.IsMax=!0;a.Layout.View.IsMin=!1;h()},min:function(b,c,d){d.config.move=!0;a.Layout.View.IsMax=!1;a.Layout.View.IsMin=!0;h()},restore:function(b,c,d){d.config.move=!0;a.Layout.View.IsMax=!1;a.Layout.View.IsMin=!1;h()},resizing:function(a){var b=a.offset();a.width()+b.left>c.Screen.Width&&a.width(c.Screen.Width-b.left);a.height()+b.top>c.Screen.Height&&a.height(c.Screen.Height-b.top);l=".Popup-View .layui-layer-resize::after {width: "+a.width()+"px;}";g.html(l);h()},moveEnd:function(a){var c=a.offset(),d=b(".Popup-Header").height()+5;c.top<d&&a.css("top",d+"px");h()},beforeEnd:function(){c.no("\u7f16\u8f91\u5668\u7981\u6b62\u5173\u95ed",{zIndex:d.zIndex});return!1}})})();w("editLayui",{})});